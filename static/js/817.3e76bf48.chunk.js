"use strict";(self.webpackChunkymp_react=self.webpackChunkymp_react||[]).push([[817],{9817:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var s=n(2791),r=n(4687),i=n.n(r),a=(n(9161),n(7804)),l=n(184);var c=n(1413),d=n(5861),o=n(9439),u=n(2705),m=n(1186),v=n(3168),f=n(3504),p=n(6871),x=n(4602);var h=function(){var e,t,n,r=(0,s.useContext)(a.Z).getLang,h=(0,s.useContext)(x.Z).data,g=(0,v.$)(),j=(0,o.Z)(g,2),y=j[0],N=j[1],b=(0,p.s0)(),w=(0,s.useState)(!1),Z=(0,o.Z)(w,2),k=Z[0],S=Z[1],T=(0,s.useState)(),C=(0,o.Z)(T,2),A=C[0],I=C[1],J=(0,s.useState)(),P=(0,o.Z)(J,2),_=P[0],B=P[1],O=(0,s.useState)(null),q=(0,o.Z)(O,2),E=q[0],F=q[1];(0,s.useEffect)((function(){function e(){return e=(0,d.Z)(i().mark((function e(){var t,n,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.JB.getAllTreatments();case 2:t=e.sent,B(!(null===t||void 0===t||!t.message)&&(null===t||void 0===t?void 0:t.message)),t.success&&I(null===(n=t.body)||void 0===n||null===(s=n.filter((function(e){return!0===e.active})))||void 0===s?void 0:s.map((function(e){return(0,c.Z)((0,c.Z)({},e),{},{isActive:e.isActive})})));case 5:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,s.useEffect)((function(){h&&h.treatment?F({treatment:null===A||void 0===A?void 0:A.find((function(e){return""+e.id===""+(null===h||void 0===h?void 0:h.treatment)})),preferences:("ar"===N.language?m.SZ:m.Bo).map((function(e){return(0,c.Z)((0,c.Z)({},e),{},{selected:null===h||void 0===h?void 0:h.preferences[e.id]})})),email:null===h||void 0===h?void 0:h.email,userId:null===h||void 0===h?void 0:h.userId}):b("/".concat(r(),"/treatments"))}),[b,A,h]);var D=(0,s.useCallback)((function(e){var t="fas ".concat("ar"===e?"fa-arrow-right":"fa-arrow-left");return(0,l.jsxs)(f.rU,{to:"/".concat(e,"/treatments"),className:"btn btn-primary bd-highlight",children:[(0,l.jsx)("i",{className:t})," ",y("Treatment.BackToTreatment")]})}),[y]),H=function(){var e=(0,d.Z)(i().mark((function e(t){var n,s,a,l,c,d,o,m,v,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===E||void 0===E||null===(n=E.preferences)||void 0===n||n.map((function(e,t){!0===e.selected?console.log(e.title):console.log("q.title")})),d="ar"===r()?null===E||void 0===E||null===(s=E.treatment)||void 0===s?void 0:s.name_ar:null===E||void 0===E||null===(a=E.treatment)||void 0===a?void 0:a.name,o=null===E||void 0===E||null===(l=E.preferences)||void 0===l?void 0:l.filter((function(e){return!0===e.selected})).map((function(e){return e.title})),S(!0),m=new FormData,v={status:"pending",userId:null===t||void 0===t?void 0:t.userId,treatmentId:null===t||void 0===t||null===(c=t.treatment)||void 0===c?void 0:c.id,travelPreferences:JSON.stringify(null===t||void 0===t?void 0:t.preferences.reduce((function(e,t){return e[t.id]=t.selected,e}),{})),treatmentParam:d,preferencesParams:JSON.stringify(o),lang:r()},m.append("request",JSON.stringify(v,0,2)),e.next=9,u.H0.createAppointmentWithoutFiles(m);case 9:if(f=e.sent,S(!1),B(!!f.message&&f.message),f.success||f.success){e.next=14;break}return e.abrupt("return");case 14:b("/".concat(r(),"/treatment-success"),{state:{appointmentId:null===f||void 0===f?void 0:f.body.id}});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,l.jsx)("div",{className:"content success-page-cont",children:(0,l.jsx)("div",{className:"container-fluid",children:(0,l.jsx)("div",{className:"row justify-content-center",children:(0,l.jsx)("div",{className:"col-lg-6",children:(0,l.jsxs)("div",{className:"card",children:[(0,l.jsx)("div",{className:"d-flex flex-row justify-content-end mx-3 mt-3",children:D(r())}),(0,l.jsx)("h3",{className:"p-2 bd-highlight text-center",children:y("Treatment.ReviewTreatment")}),_&&(0,l.jsx)("div",{className:"invalid-feedback d-block mb-2",style:{margin:"en"===N.language?"10px 0 0 15px":"10px 15px 0 0"},children:_}),E&&(0,l.jsxs)("section",{children:[(0,l.jsx)("div",{className:"card-body d-flex justify-content-center",children:(0,l.jsxs)("ul",{className:"list-group",style:{width:"40rem"},children:[" ",(0,l.jsx)("h4",{className:"mt-n4",style:{textAlign:"start"},children:y("Treatment.Treatment")}),(0,l.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-center py-1",children:(0,l.jsxs)("div",{className:"col-12",children:[" ","ar"===N.language?null===E||void 0===E||null===(e=E.treatment)||void 0===e?void 0:e.name_ar:null===E||void 0===E||null===(t=E.treatment)||void 0===t?void 0:t.name]})})]})}),(0,l.jsx)("div",{className:"card-body d-flex justify-content-center",children:(0,l.jsxs)("ul",{className:"list-group",style:{width:"40rem"},children:[" ",(0,l.jsx)("h4",{className:"mt-n4",style:{textAlign:"start"},children:y("Preference.Questions")}),null===E||void 0===E||null===(n=E.preferences)||void 0===n?void 0:n.map((function(e,t){return(0,l.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center py-1",children:[(0,l.jsxs)("div",{className:"col-9",children:[" ",e.title]}),(0,l.jsx)("div",{className:"col-3",children:!0===e.selected?y("Yes"):y("No")})]},t)}))]})}),(0,l.jsx)("div",{className:"card-body d-flex justify-content-center",children:(0,l.jsx)("p",{className:"card-text",children:(0,l.jsxs)("button",{to:"/treatment-success",className:"btn btn-primary",onClick:function(){return H(E)},disabled:k,children:[y("Confirm"),k&&(0,l.jsx)("span",{className:"spinner-border spinner-border-sm mb-1 mx-1"})]})})})]})]})})})})})};var g=function(){return(0,l.jsx)(h,{})}}}]);
//# sourceMappingURL=817.3e76bf48.chunk.js.map