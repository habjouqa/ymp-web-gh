{"version":3,"file":"static/js/959.1749e4dc.chunk.js","mappings":"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","sources":["client/components/password/ResetPassword.jsx","client/Pages/ResetPasswordPage.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { Field, Form } from \"react-final-form\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { AlertDismissible, InputField } from \"common/components\";\r\nimport AuthService from \"../../services/auth.service\";\r\nimport UserService from \"../../services/user.service\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nfunction ResetPassword(props) {\r\n  const [t, i18n] = useTranslation();\r\n  const sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms));\r\n  const navigate = useNavigate();\r\n\r\n  const urlParams = new URLSearchParams(window.location.search);\r\n  const token = urlParams.get(\"token\");\r\n  const email = urlParams.get(\"email\");\r\n  const [status, setStatus] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [message, setMessage] = useState();\r\n  const [isFirstLoad, setIsFirstLoad] = useState(false);\r\n\r\n  useEffect(async () => {\r\n    const response = await AuthService.reset(token, email);\r\n    setMessage(!!response?.message && response?.message);\r\n    setStatus(!!response.success && response.success);\r\n    setIsLoading(false);\r\n    setIsFirstLoad(true);\r\n\r\n    document.body.classList.add(\"account-page\");\r\n    return () => {\r\n      document.body.classList.remove(\"account-page\");\r\n    };\r\n  }, []);\r\n\r\n  const validate = async (values) => {\r\n    const errors = {};\r\n    if (!values.password) {\r\n      errors.password = \"Required\";\r\n    } else if (values.password.length < 6 || values.password.length >= 40) {\r\n      errors.password = \"Password length must be between 6 and 40\";\r\n    }\r\n    if (!values.confirm) {\r\n      errors.confirm = \"Required\";\r\n    } else if (values.confirm !== values.password) {\r\n      errors.confirm = \"Must match\";\r\n    }\r\n    return errors;\r\n  };\r\n\r\n  const onSubmit = async (values) => {\r\n    setIsFirstLoad(false);\r\n    setMessage(\"\");\r\n    setIsLoading(true);\r\n    const responseGetUser = await UserService.getUserByEmail(email);\r\n    if (responseGetUser.success) {\r\n      const response = await UserService.updateUserByID({\r\n        userId: responseGetUser?.body?.userId,\r\n        password: values.password,\r\n      });\r\n      // if (!response.success) setMessage(!!response.message && response.message);\r\n      // else setStatus(true);\r\n\r\n      setMessage(!!response?.body?.message && response?.body?.message);\r\n      setIsLoading(!!response.success && response.success);\r\n      setStatus(false);\r\n\r\n      if (!response.success) return;\r\n      navigate(\"/\" + i18n.language + \"/login\", {\r\n        state: {\r\n          preStatus: \"success\",\r\n          loginBoldMsg: \"You have successfully reset your password!\",\r\n          loginMsg: \"You can now login with your new credentials\",\r\n        },\r\n      });\r\n    }\r\n    setMessage(!!responseGetUser?.message && responseGetUser?.message);\r\n    setIsLoading(false);\r\n    // await sleep(3000);\r\n  };\r\n\r\n  const resetForm = (\r\n    <Form\r\n      validate={validate}\r\n      onSubmit={onSubmit}\r\n      render={({\r\n        handleSubmit,\r\n        submitError,\r\n        form,\r\n        submitting,\r\n        pristine,\r\n        values,\r\n      }) => (\r\n        <div className=\"col-md-12 col-lg-6 login-right\">\r\n          <div className=\"login-header\">\r\n            <h3>Reset Your Password</h3>\r\n          </div>\r\n          <form onSubmit={handleSubmit} className=\"needs-validation\" noValidate>\r\n            {!isFirstLoad && (\r\n              <div className=\"invalid-feedback d-block mb-2\">{message}</div>\r\n            )}\r\n            <div\r\n              className={`form-group form-focus mt-4 ${\r\n                values?.password?.length > 0 ? \"focused\" : \"\"\r\n              }`}\r\n            >\r\n              <Field\r\n                name=\"password\"\r\n                className=\"form-control floating\"\r\n                label=\"New Password\"\r\n                type=\"password\"\r\n                label_type=\"focus_label\"\r\n                component={InputField}\r\n                disabled={!status}\r\n              />\r\n            </div>\r\n            <div\r\n              className={`form-group form-focus mt-4 ${\r\n                values?.confirm?.length > 0 ? \"focused\" : \"\"\r\n              }`}\r\n            >\r\n              <Field\r\n                name=\"confirm\"\r\n                className=\"form-control floating\"\r\n                label=\"Confirm New Password\"\r\n                type=\"password\"\r\n                label_type=\"focus_label\"\r\n                component={InputField}\r\n                disabled={!status}\r\n              />\r\n            </div>\r\n            <button\r\n              className=\"btn btn-primary btn-block btn-lg login-btn mt-5\"\r\n              type=\"submit\"\r\n              disabled={isLoading || !status}\r\n            >\r\n              {!isLoading ? `Reset` : \"\"}\r\n              {isLoading && (\r\n                <span className=\"spinner-border spinner-border-sm mb-1\"></span>\r\n              )}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      )}\r\n    />\r\n  );\r\n\r\n  return (\r\n    <div className=\"content\">\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row justify-content-center\">\r\n          <div className=\"col-md-8\">\r\n            <div className=\"account-content px-3\">\r\n              {isFirstLoad && (\r\n                <AlertDismissible\r\n                  type={status ? \"success\" : \"error\"}\r\n                  boldMsg={status ? \"Success\" : \"Error!\"}\r\n                  msg={message}\r\n                />\r\n              )}\r\n              {true && (\r\n                <div className=\"row align-items-center justify-content-center\">\r\n                  {resetForm}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ResetPassword;\r\n","import React from \"react\";\r\nimport ResetPassword from \"../components/password/ResetPassword\";\r\n\r\nfunction ResetPasswordPage() {\r\n  return <ResetPassword />;\r\n}\r\nexport default ResetPasswordPage;"],"names":["props","useTranslation","i18n","navigate","useNavigate","urlParams","URLSearchParams","window","location","search","token","get","email","useState","status","setStatus","isLoading","setIsLoading","message","setMessage","isFirstLoad","setIsFirstLoad","useEffect","AuthService","response","success","document","body","classList","add","remove","validate","values","errors","password","length","confirm","onSubmit","UserService","responseGetUser","userId","language","state","preStatus","loginBoldMsg","loginMsg","resetForm","render","handleSubmit","submitError","form","submitting","pristine","className","noValidate","name","label","type","label_type","component","InputField","disabled","boldMsg","msg"],"sourceRoot":""}