"use strict";(self.webpackChunkymp_react=self.webpackChunkymp_react||[]).push([[959],{8959:function(e,s,n){n.r(s),n.d(s,{default:function(){return b}});var r=n(2791),t=n(5861),a=n(9439),o=n(4687),c=n.n(o),i=n(5078),l=n(6871),u=n(6491),d=n(1582),m=n(3618),f=n(3168),p=n(184);var v=function(e){var s=(0,f.$)(),n=(0,a.Z)(s,2),o=(n[0],n[1]),v=(0,l.s0)(),b=new URLSearchParams(window.location.search),g=b.get("token"),h=b.get("email"),w=(0,r.useState)(!1),x=(0,a.Z)(w,2),y=x[0],j=x[1],N=(0,r.useState)(!0),k=(0,a.Z)(N,2),Z=k[0],S=k[1],P=(0,r.useState)(),_=(0,a.Z)(P,2),R=_[0],U=_[1],E=(0,r.useState)(!1),M=(0,a.Z)(E,2),B=M[0],C=M[1];(0,r.useEffect)((0,t.Z)(c().mark((function e(){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.reset(g,h);case 2:return s=e.sent,U(!(null===s||void 0===s||!s.message)&&(null===s||void 0===s?void 0:s.message)),j(!!s.success&&s.success),S(!1),C(!0),document.body.classList.add("account-page"),e.abrupt("return",(function(){document.body.classList.remove("account-page")}));case 9:case"end":return e.stop()}}),e)}))),[]);var I=function(){var e=(0,t.Z)(c().mark((function e(s){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},s.password?(s.password.length<6||s.password.length>=40)&&(n.password="Password length must be between 6 and 40"):n.password="Required",s.confirm?s.confirm!==s.password&&(n.confirm="Must match"):n.confirm="Required",e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),L=function(){var e=(0,t.Z)(c().mark((function e(s){var n,r,t,a,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!1),U(""),S(!0),e.next=5,m.Z.getUserByEmail(h);case 5:if(!(n=e.sent).success){e.next=16;break}return e.next=9,m.Z.updateUserByID({userId:null===n||void 0===n||null===(r=n.body)||void 0===r?void 0:r.userId,password:s.password});case 9:if(i=e.sent,U(!(null===i||void 0===i||null===(t=i.body)||void 0===t||!t.message)&&(null===i||void 0===i||null===(a=i.body)||void 0===a?void 0:a.message)),S(!!i.success&&i.success),j(!1),i.success){e.next=15;break}return e.abrupt("return");case 15:v("/"+o.language+"/login",{state:{preStatus:"success",loginBoldMsg:"You have successfully reset your password!",loginMsg:"You can now login with your new credentials"}});case 16:U(!(null===n||void 0===n||!n.message)&&(null===n||void 0===n?void 0:n.message)),S(!1);case 18:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),Y=(0,p.jsx)(i.l0,{validate:I,onSubmit:L,render:function(e){var s,n,r=e.handleSubmit,t=(e.submitError,e.form,e.submitting,e.pristine,e.values);return(0,p.jsxs)("div",{className:"col-md-12 col-lg-6 login-right",children:[(0,p.jsx)("div",{className:"login-header",children:(0,p.jsx)("h3",{children:"Reset Your Password"})}),(0,p.jsxs)("form",{onSubmit:r,className:"needs-validation",noValidate:!0,children:[!B&&(0,p.jsx)("div",{className:"invalid-feedback d-block mb-2",children:R}),(0,p.jsx)("div",{className:"form-group form-focus mt-4 ".concat((null===t||void 0===t||null===(s=t.password)||void 0===s?void 0:s.length)>0?"focused":""),children:(0,p.jsx)(i.gN,{name:"password",className:"form-control floating",label:"New Password",type:"password",label_type:"focus_label",component:u.UP,disabled:!y})}),(0,p.jsx)("div",{className:"form-group form-focus mt-4 ".concat((null===t||void 0===t||null===(n=t.confirm)||void 0===n?void 0:n.length)>0?"focused":""),children:(0,p.jsx)(i.gN,{name:"confirm",className:"form-control floating",label:"Confirm New Password",type:"password",label_type:"focus_label",component:u.UP,disabled:!y})}),(0,p.jsxs)("button",{className:"btn btn-primary btn-block btn-lg login-btn mt-5",type:"submit",disabled:Z||!y,children:[Z?"":"Reset",Z&&(0,p.jsx)("span",{className:"spinner-border spinner-border-sm mb-1"})]})]})]})}});return(0,p.jsx)("div",{className:"content",children:(0,p.jsx)("div",{className:"container-fluid",children:(0,p.jsx)("div",{className:"row justify-content-center",children:(0,p.jsx)("div",{className:"col-md-8",children:(0,p.jsxs)("div",{className:"account-content px-3",children:[B&&(0,p.jsx)(u.at,{type:y?"success":"error",boldMsg:y?"Success":"Error!",msg:R}),(0,p.jsx)("div",{className:"row align-items-center justify-content-center",children:Y})]})})})})})};var b=function(){return(0,p.jsx)(v,{})}}}]);
//# sourceMappingURL=959.1749e4dc.chunk.js.map